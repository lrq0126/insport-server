(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-personal-personal-identity-info"],{"065e":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("4ea4");__webpack_require__("99af"),__webpack_require__("d81d"),__webpack_require__("a434"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__("2909")),_personal=__webpack_require__("7963"),_default={data:function(){return{formItem:{identityName:"",identityCode:""},file:[]}},methods:{saveIdentity:function saveIdentity(){if(this.file.length<2)uni.showToast({title:"请添加身份证正反面照片",icon:"none"});else{var customerInfo=uni.getStorageSync("info");this.formItem.customerId=customerInfo.id;var files=this.file.map((function(e,t){return{name:"file",file:e,uri:e.path}})),dataInfo=Object.assign({},this.formItem);delete dataInfo["id"],delete dataInfo["updateId"],delete dataInfo["updateTime"],(0,_personal.saveIdentity)(dataInfo,files,(function(e){uni.showLoading({title:"上传中"})})).then((function(res){var resultData=eval("("+res.data+")");200==resultData.code?(uni.showToast({title:"身份证信息保存成功"}),setTimeout((function(){uni.redirectTo({url:"./personal-identity"})}),500)):uni.showToast({icon:"error",title:resultData.message,duration:800})}))}},showDeleteButton:function(e){var t=this;clearTimeout(this.Loop),this.Loop=setTimeout((function(){t.delbtn=!0}),1e3)},clearLoop:function(e){clearTimeout(this.Loop)},hide:function(){this.delbtn=!1},chooseImg:function(){var e=this;this.hide(),uni.chooseImage({count:2,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.file.length+t.tempFiles.length>2?uni.showToast({title:"只能添加2张图片",icon:"warning"}):e.file=[].concat((0,_toConsumableArray2.default)(e.file),(0,_toConsumableArray2.default)(t.tempFiles))},fail:function(){}})},delImg:function(e){var t=this;uni.showModal({title:"温馨提示",content:"是否删除图片",success:function(n){n.confirm?t.file.splice(e,1):n.cancel&&console.log("用户点击取消")}})},previewImg:function(e){uni.previewImage({urls:[this.file[e].path],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){console.log("选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片")},fail:function(e){console.log(e.errMsg)}}})}}};exports.default=_default},"06c5":function(e,t,n){"use strict";n("a630"),n("fb6a"),n("d3b7"),n("25f0"),n("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(n("6b75"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(e){if("string"===typeof e)return(0,i.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.default)(e,t):void 0}}},2909:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var i=s(n("6005")),a=s(n("db90")),o=s(n("06c5")),r=s(n("3427"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(0,i.default)(e)||(0,a.default)(e)||(0,o.default)(e)||(0,r.default)()}},3427:function(e,t,n){"use strict";function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"35cd":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/*字体颜色*/\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.package_C_C_T[data-v-d25b050e]{padding-left:%?20?%;width:%?180?%;display:inline-block;text-align:right;margin-right:%?6?%;font-size:%?32?%}.confirm-select-class[data-v-d25b050e]{bottom:%?20?%;position:absolute;margin-left:25%;width:50%;line-height:%?80?%;height:%?80?%}.confirm-select-class .button-class[data-v-d25b050e]{line-height:%?80?%;height:%?80?%;background-color:#007aff;border-radius:%?20?%;color:#f0f0f0;text-align:center}.img-class[data-v-d25b050e]{width:100%;margin:5%;float:left;padding:.3rem .3rem}.img-class .upload[data-v-d25b050e]{line-height:%?100?%;font-size:%?100?%}.img-class .image-list[data-v-d25b050e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.img-class .image-list .image-content[data-v-d25b050e]{margin-left:%?10?%;position:relative}.img-class .image-list .image-content .icon-bg[data-v-d25b050e]{position:absolute;bottom:%?18?%;width:100%;background:rgba(53,53,53,.6);z-index:2;text-align:center}.img-class .image-list .image-content .icon-bg uni-text[data-v-d25b050e]{color:#fff;position:relative;z-index:1}.img-class .image-list .image-content uni-image[data-v-d25b050e]{touch-callout:none;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;width:%?200?%;height:%?200?%;border:%?2?% solid rgba(53,53,53,.6)}',""]),e.exports=t},4862:function(e,t,n){"use strict";n.r(t);var i=n("beb6"),a=n("d8b5");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("776a");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"d25b050e",null,!1,i["a"],r);t["default"]=u.exports},5069:function(e,t,n){var i=n("35cd");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("748df90c",i,!0,{sourceMap:!1,shadowMode:!1})},6005:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i=a(n("6b75"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e))return(0,i.default)(e)}},"6b75":function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},"776a":function(e,t,n){"use strict";var i=n("5069"),a=n.n(i);a.a},7963:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getIdentityList=s,t.saveIdentity=u;var a=i(n("93e1")),o=i(n("e2b2")),r=n("065a");function s(e){var t=e.page,n=e.limit,i=e.customerId;return uni.request({url:o.default.baseUrl.dev+"/customer/getIdentityList",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,r.getToken)()+"_"+(0,r.getCustomerNo)()},data:{pageNumber:t,pageSize:n,customerId:i}})}function u(e,t,n){return a.default.uploadFile(e,"/customer/saveIdentity",t,n)}},beb6:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticStyle:{display:"flex"}},[n("v-uni-text",{staticClass:"package_C_C_T"},[e._v("姓名：")]),n("v-uni-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formItem.identityName,callback:function(t){e.$set(e.formItem,"identityName",t)},expression:"formItem.identityName"}})],1),n("v-uni-view",{staticStyle:{display:"flex"}},[n("v-uni-text",{staticClass:"package_C_C_T"},[e._v("身份证号：")]),n("v-uni-input",{attrs:{placeholder:"请输入证件号码"},model:{value:e.formItem.identityCode,callback:function(t){e.$set(e.formItem,"identityCode",t)},expression:"formItem.identityCode"}})],1),n("v-uni-view",{staticClass:"img-class"},[n("v-uni-view",{staticStyle:{display:"flex"}},[n("v-uni-view",{staticClass:"image-list",nativeOn:{touchstart:function(t){return e.showDeleteButton()},touchend:function(t){return e.clearLoop()}}},[e._l(e.file,(function(t,i){return n("v-uni-view",{key:i,staticClass:"image-content",on:{longpress:function(t){arguments[0]=t=e.$handleEvent(t),e.longpress.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"icon-bg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(i)}}},[n("v-uni-text",{staticClass:"iconfont iconshanchu"})],1),n("v-uni-image",{attrs:{mode:"scaleToFill",src:t.path},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImg(i)}}})],1)})),e.file.length<2?n("v-uni-view",{staticClass:"upload iconfont iconshangchuantupian",staticStyle:{"margin-left":"40upx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImg.apply(void 0,arguments)}}}):e._e()],2)],1)],1),n("v-uni-view",{staticClass:"confirm-select-class"},[n("v-uni-view",{staticClass:"button-class",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveIdentity.apply(void 0,arguments)}}},[n("v-uni-text",[e._v("保存")])],1)],1)],1)},o=[]},d8b5:function(e,t,n){"use strict";n.r(t);var i=n("065e"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},db90:function(e,t,n){"use strict";function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("d3b7"),n("3ca3"),n("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}}]);