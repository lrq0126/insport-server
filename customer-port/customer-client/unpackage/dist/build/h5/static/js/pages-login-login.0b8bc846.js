(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0702":function(e,t,n){var o=n("d0e7");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("4f06").default;i("9fc6c09a",o,!0,{sourceMap:!1,shadowMode:!1})},"40bc":function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"login-view"},[n("header",[n("v-uni-view",{staticClass:"header"},[n("v-uni-view",{staticClass:"h1"},[e._v("用户登录")]),n("v-uni-text",{staticClass:"membercheckin"},[e._v("享受更多贴心服务")])],1)],1),n("v-uni-view",{staticClass:"wrap differ"},[n("v-uni-view",{staticClass:"menber-list"},[n("v-uni-view",{attrs:{id:"HandLogin"}},[n("v-uni-form",{attrs:{id:"form1"}},[n("v-uni-view",{staticClass:"menber-list-li inputt"},[n("v-uni-label",[e._v("登录账号")]),n("v-uni-input",{attrs:{type:"text",id:"username",name:"username",maxlength:"50",placeholder:"请输入会员ID、手机号或者邮箱"},model:{value:e.loginName,callback:function(t){e.loginName=t},expression:"loginName"}})],1),n("v-uni-view",{staticClass:"menber-list-li inputt"},[n("v-uni-label",[e._v("登录密码")]),n("v-uni-input",{attrs:{type:"password",id:"password",name:"password",maxlength:"20",placeholder:"请输入登录密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("v-uni-view",{staticClass:"menber-list-li butt one"},[n("v-uni-button",{staticClass:"submit",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleSubmit.apply(void 0,arguments)}}},[e._v("立即登录")])],1)],1)],1)],1)],1)],1)},a=[]},4916:function(e,t,n){e.exports=n.p+"static/img/checkin-0.60dc9537.jpg"},"64b0":function(e,t,n){"use strict";n.r(t);var o=n("40bc"),i=n("ecfd");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("958c");var r,s=n("f0c5"),d=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"3d707a6c",null,!1,o["a"],r);t["default"]=d.exports},"6a86":function(e,t,n){"use strict";var o=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.parentsInfo=s,t.login=d,t.loginRegistered=u,t.editUserInfo=l,t.editPassword=c,t.loginWX=g,t.checkLoginStatus=p,t.loginFaceBook=f;var i=o(n("5530")),a=o(n("e2b2")),r=n("065a");function s(e){var t={telephone:e};return uni.request({url:a.default.baseUrl.dev+"/parent/parentApp/loginTel",method:"get",data:(0,i.default)({},t)})}function d(e){var t=e.loginName,n=e.password,o={loginName:t,password:n};return uni.request({url:a.default.baseUrl.dev+"/log/login",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{paramMap:JSON.stringify(o)}})}function u(e){var t=e.customerName,n=e.loginName,o=e.phoneNumber,i=e.password,r=e.email,s=e.ServerID,d=e.CustID,u=e.FromType,l=e.SysCC;return uni.request({url:a.default.baseUrl.dev+"/log/register",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:{customerName:t,loginName:n,phoneNumber:o,password:i,email:r,ServerID:s,CustID:d,FromType:u,SysCC:l}})}function l(e){var t=e.id,n=e.customerName,o=e.age,s=e.gender,d=e.phoneNumber,u=e.callNumber,l=e.zipCode,c=e.englishName,g=e.email,p=e.message,f={id:t,customerName:n,age:o,gender:s,phoneNumber:d,callNumber:u,zipCode:l,englishName:c,email:g,message:p};return uni.request({url:a.default.baseUrl.dev+"/customer/update",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,r.getToken)()+"_"+(0,r.getCustomerNo)()},data:(0,i.default)({},f)})}function c(e){var t=e.id,n=e.password,o=e.newPassword,s={id:t,password:n,newPassword:o};return uni.request({url:a.default.baseUrl.dev+"/customer/editPassword",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,r.getToken)()+"_"+(0,r.getCustomerNo)()},data:(0,i.default)({},s)})}function g(e){var t={code:e};return uni.request({url:a.default.baseUrl.dev+"/weixin/getUserInfoByCode",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:(0,i.default)({},t)})}function p(){return uni.request({url:a.default.baseUrl.dev+"/log/checkLoginStatus",method:"get",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,r.getToken)()+"_"+(0,r.getCustomerNo)()}})}function f(e){var t={code:e};return uni.request({url:a.default.baseUrl.dev+"/faceBook/loginFaceBook",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:(0,i.default)({},t)})}},"958c":function(e,t,n){"use strict";var o=n("0702"),i=n.n(o);i.a},d0e7:function(e,t,n){var o=n("24fb"),i=n("1de5"),a=n("4916");t=o(!1);var r=i(a);t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/*字体颜色*/\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.login-view .header[data-v-3d707a6c]{background:url('+r+") no-repeat 50%;width:100%;height:125px;text-align:center}.login-view .header .h1[data-v-3d707a6c]{color:#09f;font-size:%?64?%;padding-top:%?62?%}.login-view .header uni-text[data-v-3d707a6c]{color:#786450;font-size:%?36?%}.login-view .differ[data-v-3d707a6c]{padding-top:0}.login-view .wrap[data-v-3d707a6c]{max-width:%?1440?%;margin:0 auto;padding:%?20?% %?20?% %?150?% %?20?%}.login-view .wrap .menber-list-li[data-v-3d707a6c]{color:#505050;height:%?70?%;border:1px solid #e5e5e5;line-height:%?112?%;margin-top:-1px;padding-left:%?24?%;background:#fff;position:relative}.login-view .wrap .inputt[data-v-3d707a6c]{color:#505050;height:%?112?%;border:1px solid #e5e5e5;line-height:%?112?%;margin-top:-1px;background:#fff;position:relative;padding-left:0}.login-view .wrap .inputt uni-label[data-v-3d707a6c]{margin-right:%?54?%;padding-left:%?20?%;width:%?130?%;display:inline-block;text-align:right;position:absolute}.login-view .wrap .inputt uni-input[data-v-3d707a6c]{border:0;color:#878787;padding-left:%?160?%;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;height:%?108?%;font-size:%?28?%;margin-left:10px}.login-view .wrap .butt[data-v-3d707a6c]{border:0;background:#f3f3f3;text-align:center;margin-top:%?40?%;padding:0}.login-view .wrap .butt uni-button[data-v-3d707a6c]{border:1px #dedede solid;width:100%;height:%?84?%;background:rgba(251,189,67,.96);border-radius:%?10?%;color:#fff;font-size:%?32?%}.login-view .wrap .butt .ax[data-v-3d707a6c]{float:right;width:50%;border-radius:%?10?%;color:#00f;display:block;text-align:center}.login-view .wrap .one[data-v-3d707a6c]{margin-top:%?32?%}.login-view .wrap .facebook-butt[data-v-3d707a6c]{position:relative;height:%?180?%;border:0;background:#f3f3f3;text-align:center;margin-top:%?40?%;padding:0;color:#505050;line-height:%?112?%}.login-view .wrap .facebook-butt uni-view[data-v-3d707a6c]{height:%?200?%;width:%?200?%;border-radius:%?500?%;margin:0 auto;position:relative}.login-view .wrap .facebook-butt uni-view img[data-v-3d707a6c]{position:absolute;top:%?20?%;left:%?50?%;width:%?90?%;height:%?90?%}.login-view .wrap .facebook-butt uni-view uni-text[data-v-3d707a6c]{position:absolute;bottom:%?36?%;left:0;width:%?200?%;letter-spacing:1px}.login-view .wrap .menber-list-butt[data-v-3d707a6c]{position:relative;height:%?180?%;border:0;background:#f3f3f3;text-align:center;margin-top:%?40?%;padding:0;color:#505050;line-height:%?112?%}.login-view .wrap .menber-list-butt uni-view[data-v-3d707a6c]{height:%?200?%;width:%?200?%;border:1px #ddd solid;border-radius:%?500?%;margin:0 auto;position:relative}.login-view .wrap .menber-list-butt uni-view img[data-v-3d707a6c]{position:absolute;top:%?40?%;left:%?60?%;width:%?90?%;height:%?70?%}.login-view .wrap .menber-list-butt uni-view uni-text[data-v-3d707a6c]{position:absolute;bottom:%?36?%;left:0;width:%?200?%;letter-spacing:1px}",""]),e.exports=t},ecfd:function(e,t,n){"use strict";n.r(t);var o=n("f1fd"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},f1fd:function(e,t,n){"use strict";var o=n("4ea4");n("d3b7"),n("ac1f"),n("466d"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n("5530")),a=n("6a86"),r=n("065a"),s=n("2f62"),d={data:function(){return{loginName:"",password:""}},onBackPress:function(e){return uni.switchTab({url:"/pages/mine/index"}),!0},onShow:function(){this.handlelogout()},mounted:function(){},methods:(0,i.default)((0,i.default)({},(0,s.mapMutations)(["login","changeUserName","changeLoginName","logout","changeHeadimg"])),{},{handleGo:function(e){uni.navigateTo({url:e})},is_weixin:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},handlelogout:function(){uni.removeStorageSync("info"),(0,r.removeToken)(),(0,r.removeCustomerNo)(),this.logout()},handleSubmit:function(){var e=this,t={loginName:this.loginName,password:this.password};if(this.loginName)if(this.password){uni.showLoading({title:"正在登录...",mask:!0});(0,a.login)(t).then((function(t){200==t[1].data.code?((0,r.setToken)(t[1].data.content.token),(0,r.setCustomerNo)(t[1].data.content.customer.customerNo),e.changeUserName(t[1].data.content.customer.customerName),e.changeLoginName(t[1].data.content.customer.loginName),e.changeHeadimg(n("6184")),uni.setStorageSync("info",t[1].data.content.customer),e.login(),setTimeout((function(){uni.hideLoading(),uni.showToast({icon:"success",title:"登录成功",duration:1500})}),1300),setTimeout((function(){uni.switchTab({url:"../mine/index"})}),2300)):(uni.hideLoading(),uni.showToast({title:"您输入的登录账号或者密码不正确，重新输入!",icon:"none"}))}))}else uni.showToast({icon:"none",title:"登录密码不能为空"});else uni.showToast({icon:"none",title:"登录账号不能为空"})},getPhoneNumber:function(e){if(console.log(e),"getPhoneNumber:fail user deny"==e.detail.errMsg)console.log("用户拒绝提供手机号码");else{console.log("用户同意提供手机号码"),console.log(JSON.stringify(e.detail.encryptedData)),console.log(JSON.stringify(e.detail.iv));var t={encryptedData:e.detail.encryptedData,iv:e.detail.iv,sessionKey:this.sessionKey};(0,a.getPhoneNumber)(t).then((function(e){e[1].data.code})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))}},handelParentsInfo:function(e){(0,a.parentsInfo)(e).then((function(e){e[1].data.code})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))},isLogin:function(){},startLogin:function(){if(this.isRotate)return!1;""!=this.mynote.phone.length?this.mynote.password.length<5?uni.showToast({icon:"none",position:"bottom",title:"请输入密码不少于6位数"}):(_this.isRotate=!0,"admin"==this.mynote.phone&&123456==this.mynote.password?(this.login(),this.changeUserName(this.mynote.phone),uni.setStorageSync("info",{userName:this.mynote.phone,password:this.mynote.password}),setTimeout((function(){_this.isRotate=!1,uni.switchTab({url:"../mine/index"})}),3e3)):setTimeout((function(){_this.isRotate=!1,uni.showToast({title:"您输入的账号或者密码不正确",icon:"none"})}),3e3)):uni.showToast({icon:"none",position:"bottom",title:"用户名/手机号码不能为空"})},GetUserInfo:function(e){var t=this;wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?(console.log("已授权====="),wx.getUserInfo({success:function(e){console.log("获取用户信息成功",e),t.handleRegistered(t.loginCode)},fail:function(e){console.log("获取用户信息失败",e)}})):console.log("未授权=====")}})},handleRegistered:function(e){var t=this;(0,a.loginRegistered)(e).then((function(e){0==e[1].data.code&&(t.sessionKey=JSON.parse(e[1].data.data).session_key,t.openid=JSON.parse(e[1].data.data).openid)})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))},showSettingToast:function(e){wx.showModal({title:"提示！",confirmText:"去设置",showCancel:!1,content:e,success:function(e){e.confirm&&wx.navigateTo({url:"../setting/setting"})}})},onGetPhoneNumber:function(e){uni.showModal({title:"onGetPhoneNumber",content:e.detail.errMsg})},handleWX:function(){var e="https://open.weixin.qq.com/connect/oauth2/authorize",t="wxfe820ab4d2e99546",n="http://jiyun.bainligou.com/client/jiyun/#/pages/mine/index",o="snsapi_userinfo",i="WeChat";n=encodeURIComponent(n),e=e+"?appid="+t+"&redirect_uri="+n+"&response_type=code&scope="+o+"&state="+i+"#wechat_redirect",window.location.href=e},facebookLogin:function(){var e="wxfe820ab4d2e99546",t="";window.location.href="https://www.facebook.com/v3.3/dialog/oauth?client_id="+e+"&redirect_uri=http://jiyun.bainligou.com/client/jiyun&scope="+t+"&response_type=code&state=FaceBook"}})};t.default=d}}]);