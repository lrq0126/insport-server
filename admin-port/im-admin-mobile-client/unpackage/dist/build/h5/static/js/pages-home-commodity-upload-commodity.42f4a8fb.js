(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-commodity-upload-commodity"],{"06c5":function(e,t,i){"use strict";i("a630"),i("fb6a"),i("d3b7"),i("25f0"),i("3ca3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(i("6b75"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(e){if("string"===typeof e)return(0,o.default)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,o.default)(e,t):void 0}}},2170:function(e,t,i){var o=i("24fb");t=o(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/*字体颜色*/\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.base-class[data-v-0f01ebee]{background-color:#fff;width:100%;height:100%;float:left}.base-class .select-class[data-v-0f01ebee]{outline:none;background-color:#f7f7f7;width:31%;margin-right:2%;height:%?56?%;border:%?2?% solid #9f9f9f;border-radius:%?10?%}.base-class .commodity-info-class[data-v-0f01ebee]{width:100%;margin-bottom:5%;padding-top:%?20?%}.base-class .commodity-info-class .commodity-info-title[data-v-0f01ebee]{color:#747474;font-size:%?30?%;width:25%;text-align:right;float:left}.base-class .commodity-info-class .commodity-info-value[data-v-0f01ebee]{height:%?56?%;font-size:%?30?%;width:70%;float:left;border-bottom:1px solid #c1c1c1}.base-class .textarea-class[data-v-0f01ebee]{border:#dcdcdc solid %?1?%;margin-top:38%;margin-left:5%;width:90%}.base-class .img-class[data-v-0f01ebee]{width:100%;margin:5%;float:left;padding:.3rem .3rem}.base-class .img-class .upload[data-v-0f01ebee]{line-height:%?100?%;font-size:%?100?%}.base-class .img-class .image-list[data-v-0f01ebee]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:100%}.base-class .img-class .image-list .image-content[data-v-0f01ebee]{margin-left:%?10?%;position:relative}.base-class .img-class .image-list .image-content .icon-bg[data-v-0f01ebee]{position:absolute;bottom:%?18?%;width:100%;background:rgba(53,53,53,.6);z-index:2;text-align:center}.base-class .img-class .image-list .image-content .icon-bg uni-text[data-v-0f01ebee]{color:#fff;position:relative;z-index:1}.base-class .img-class .image-list .image-content uni-image[data-v-0f01ebee]{touch-callout:none;-webkit-touch-callout:none;-ms-touch-callout:none;-moz-touch-callout:none;width:%?200?%;height:%?200?%;border:%?2?% solid rgba(53,53,53,.6)}.base-class .button-class[data-v-0f01ebee]{width:80%;position:fixed;bottom:%?20?%;text-align:center;font-size:%?36?%;color:#fff;height:%?70?%;line-height:%?70?%;border-radius:%?8?%;margin-left:10%;margin-right:10%;background-color:rgba(41,195,251,.96)}.base-class .button-class-loading[data-v-0f01ebee]{width:80%;position:fixed;bottom:%?20?%;text-align:center;font-size:%?36?%;color:#fff;height:%?70?%;line-height:%?70?%;bcommodity-radius:%?8?%;margin-left:10%;margin-right:10%;background-color:#edf0ed}',""]),e.exports=t},"25a3":function(module,exports,__webpack_require__){"use strict";(function(__f__){var _interopRequireDefault=__webpack_require__("4ea4");__webpack_require__("99af"),__webpack_require__("d81d"),__webpack_require__("a434"),__webpack_require__("d3b7"),__webpack_require__("e25e"),__webpack_require__("ac1f"),__webpack_require__("1276"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__("2909")),_jweixin=_interopRequireDefault(__webpack_require__("5f2c")),_wxUtil=__webpack_require__("b330"),_commodity=__webpack_require__("b05a"),_auth=__webpack_require__("ea86"),_default={data:function(){return{file:[],delbtn:!1,barCode:"",formItem:{countryId:"",commodityName:"",commodityBrand:"",barCode:"",socialAssortId:"",beginPrice:"",finishPrice:"",message:""},handing:[],subclas:[],productClass:[]}},methods:{init:function(){var e=window.location.href.split("#")[0];(0,_wxUtil.wxConfig)(e),_jweixin.default.ready((function(){_jweixin.default.checkJsApi({jsApiList:["scanQRCode"],success:function(e){1!=e.checkResult.scanQRCode&&alert("当前客户端版本不支持扫一扫")},fail:function(e){alert("checkJsApi error! ----\x3e ",e)}})})),_jweixin.default.error((function(e){__f__("log","wxConfig error：",e," at pages/home/commodity/upload-commodity.vue:162")}))},previewImg:function(e){uni.previewImage({urls:[this.file[e].path],longPressActions:{itemList:["发送给朋友","保存图片","收藏"],success:function(e){__f__("log","选中了第"+(e.tapIndex+1)+"个按钮,第"+(e.index+1)+"张图片"," at pages/home/commodity/upload-commodity.vue:172")},fail:function(e){__f__("log",e.errMsg," at pages/home/commodity/upload-commodity.vue:175")}}})},hide:function(){this.delbtn=!1},checkCode:function(e){(0,_commodity.checkBarCode)().then((function(e){200!=e[1].data.code&&uni.showModal({title:"这个条码已经录入，无需重复录入"})}))},scan:function(){var e=this;_jweixin.default.scanQRCode({needResult:1,scanType:["barCode"],fail:function(e){uni.showModal({title:e})},success:function(t){var i=t.resultStr;i&&(e.barCode=i.split(",")[1],e.checkCode(e.barCode))}})},chooseImg:function(){var e=this;this.hide(),uni.chooseImage({count:3,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.file.length+t.tempFiles.length>3?uni.showToast({title:"图片超过三张"}):e.file=[].concat((0,_toConsumableArray2.default)(e.file),(0,_toConsumableArray2.default)(t.tempFiles))},fail:function(){}})},delImg:function(e){var t=this;uni.showModal({title:"温馨提示",content:"是否删除图片",success:function(i){i.confirm?t.file.splice(e,1):i.cancel&&__f__("log","用户点击取消"," at pages/home/commodity/upload-commodity.vue:246")}})},resettingForm:function(){this.formItem.countryId="",this.formItem.applyUserId="",this.formItem.commodityName="",this.formItem.commodityBrand="",this.formItem.barCode="",this.formItem.socialAssortId="",this.formItem.beginPrice="",this.formItem.finishPrice="",this.formItem.message="",this.barCode="",this.file=[]},comfirm:function comfirm(){var _this2=this;if(this.formItem.commodityName)if(this.barCode)if(this.formItem.socialAssortId)if(this.formItem.beginPrice)if(this.formItem.finishPrice&&parseInt(this.formItem.finishPrice)<parseInt(this.formItem.beginPrice))uni.showToast({title:"价格区间必须有误，请修改",icon:"error"});else if(this.file.length<2)uni.showToast({title:"请上传最少2张照片",icon:"error"});else{this.formItem.finishPrice||(this.formItem.finishPrice=this.formItem.beginPrice),this.formItem.barCode=this.barCode;var userInfo=uni.getStorageSync("info");this.formItem.countryId=userInfo.countryId,this.formItem.applyUserId=userInfo.userId;var files=this.file.map((function(e,t){return{name:"file",file:e,uri:e.path}})),dataInfo=Object.assign({},this.formItem);(0,_commodity.comfirmCommodity)(dataInfo,files,(function(e){uni.showLoading({title:"上传中"})})).then((function(res){var resultData=eval("("+res.data+")");200==resultData.code?(uni.showToast({title:"商品上传成功"}),_this2.resettingForm()):uni.showToast({icon:"error",title:resultData.message,duration:800})})).finally((function(){setTimeout((function(){this.loading=!1}),800)}))}else uni.showToast({title:"请输入商品的价格区间",icon:"error"});else uni.showToast({title:"请选择商品的归属类",icon:"error"});else uni.showToast({title:"请扫描商品条形码",icon:"error"});else uni.showToast({title:"请输入商品名称",icon:"error"})},getSocialAssortTree:function(){var e=this;(0,_commodity.getParentAssort)().then((function(t){200==t[1].data.code&&(e.handing=t[1].data.content)}))}},mounted:function(){this.getSocialAssortTree(),this.init()}};exports.default=_default}).call(this,__webpack_require__("0de9")["log"])},2909:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var o=r(i("6005")),a=r(i("db90")),n=r(i("06c5")),s=r(i("3427"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(0,o.default)(e)||(0,a.default)(e)||(0,n.default)(e)||(0,s.default)()}},3427:function(e,t,i){"use strict";function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"586b":function(e,t,i){var o=i("2170");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i("4f06").default;a("77f49963",o,!0,{sourceMap:!1,shadowMode:!1})},6005:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=a(i("6b75"));function a(e){return e&&e.__esModule?e:{default:e}}function n(e){if(Array.isArray(e))return(0,o.default)(e)}},6606:function(e,t,i){"use strict";i.r(t);var o=i("a779"),a=i("d13b");for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);i("8736");var s,r=i("f0c5"),c=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"0f01ebee",null,!1,o["a"],s);t["default"]=c.exports},"6b75":function(e,t,i){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},"76a7":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAACU0lEQVRIS+1Wz2vTYBh+3sTG1cpsKsPJRG3XVMWB3VFvgigeRLwrgiDdsiH4H/Qv0INmdXhQEHbwNLyIgl53EVFxwppuqcr8vaTTFdfW5JWq07VJ1dKwXJZbeH88z/u+3/t9DyGgjwLChRt4nEPdjjEowN60mhSTsLQ41P+oFdFwbqZvIwSl2e44QvnzhsQTZKi22tYALI8VjoN5gghRTwAHA+aoMt1si1yf2ybV7LcEj0IAMPMCSDhjqcm7K7F/gLMsxHoK8yD0MmMKhGoDQ2bDtGkIF5SKi9Sl12G5a3kCgOzdET5EwCfzg7IDWXLqPr+BN2v5fRLRCzA/MEdSR/ycfUzT74FwtAZx7xc1MdMAHM3pgwLjMQOTlqqc8hNY1vRJIpxkiAcsNfFsHTiYVm+5UoyLYm2OgZylKqqfM45p+RtMdLYaEreXzyfeN8y4/hO7qu/32tNOSUQvG9FKVzXydXjPvHuPO83eZnzwd7Ws6UUi7GqTeFvuDC5aaireMOM1An5qqam063C1Rb9D5+BnXC/gx5u6LJVLF+OlDgtyhcu5woA1nHzuWqeIZvRK9O0NATdNVTnnJ7A8VsgBnIEo7LYy/a/W8pG4Q4QTQbxO68Be0gf3zRHlmK+HS9MfEuGwp/TBL7HHxDGAptzAvMSV0GnPVcuyIPcUroGQcsUxJCIcBOOd+THZ5xJ79YCf8ta5RURbvSq2RSQXM8pss00en91JtvOyVZf+Lm9Xom5PS90L4XSzoIctGqXRRMvkUS2fhkAuPf5fgt7Puf4rV2B39XfSoDIufYBc8QAAAABJRU5ErkJggg=="},8736:function(e,t,i){"use strict";var o=i("586b"),a=i.n(o);a.a},a779:function(e,t,i){"use strict";var o;i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return o}));var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",{staticClass:"base-class"},[o("v-uni-view",{staticClass:"commodity-info-class"},[o("v-uni-view",{staticStyle:{width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("商品名称：")]),o("v-uni-view",{staticClass:"commodity-info-value"},[o("v-uni-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.formItem.commodityName,callback:function(t){e.$set(e.formItem,"commodityName",t)},expression:"formItem.commodityName"}})],1)],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("条形码：")]),o("v-uni-view",{staticClass:"commodity-info-value",staticStyle:{"border-bottom":"none"}},[o("v-uni-view",{staticStyle:{width:"84%",height:"56upx",float:"left","margin-left":"1%","border-bottom":"1px solid #c1c1c1"}},[o("v-uni-input",{attrs:{placeholder:"请输入或扫描条形码"},model:{value:e.barCode,callback:function(t){e.barCode=t},expression:"barCode"}})],1),o("v-uni-view",{staticStyle:{width:"15%",float:"left"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.scan()}}},[o("v-uni-view",{staticStyle:{"margin-top":"5upx"}},[o("img",{attrs:{src:i("76a7")}})])],1)],1)],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("商品归属：")]),o("v-uni-view",{staticClass:"commodity-info-value",staticStyle:{"border-bottom":"none"}},[o("select",{directives:[{name:"model",rawName:"v-model",value:e.subclas,expression:"subclas"}],staticClass:"select-class",attrs:{placeholder:"--请选择--"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.subclas=t.target.multiple?i:i[0]}}},[o("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.handing,(function(t,i){return o("option",{key:i,domProps:{value:t.children}},[e._v(e._s(t.assortName))])}))],2),e.subclas.length>0?o("select",{directives:[{name:"model",rawName:"v-model",value:e.productClass,expression:"productClass"}],staticClass:"select-class",attrs:{placeholder:"--请选择--"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.productClass=t.target.multiple?i:i[0]}}},[o("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.subclas,(function(t,i){return o("option",{key:i,domProps:{value:t.children}},[e._v(e._s(t.assortName))])}))],2):e._e(),e.productClass.length>0?o("select",{directives:[{name:"model",rawName:"v-model",value:e.formItem.socialAssortId,expression:"formItem.socialAssortId"}],staticClass:"select-class",attrs:{placeholder:"--请选择--"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.formItem,"socialAssortId",t.target.multiple?i:i[0])}}},[o("option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.productClass,(function(t,i){return o("option",{key:i,domProps:{value:t.id}},[e._v(e._s(t.assortName))])}))],2):e._e()])],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("商品价格：")]),o("v-uni-view",{staticClass:"commodity-info-value",staticStyle:{"border-bottom":"none",display:"flex"}},[o("v-uni-view",{staticStyle:{width:"35%",border:"2upx solid #c1c1c1","border-radius":"8upx"}},[o("v-uni-input",{staticStyle:{"padding-left":"8upx"},attrs:{type:"number"},model:{value:e.formItem.beginPrice,callback:function(t){e.$set(e.formItem,"beginPrice",t)},expression:"formItem.beginPrice"}})],1),o("span",{staticStyle:{width:"10%","text-align":"center"}},[e._v("~")]),o("v-uni-view",{staticStyle:{width:"35%",border:"2upx solid #c1c1c1","border-radius":"8upx"}},[o("v-uni-input",{staticStyle:{"padding-left":"8upx"},attrs:{type:"number"},model:{value:e.formItem.finishPrice,callback:function(t){e.$set(e.formItem,"finishPrice",t)},expression:"formItem.finishPrice"}})],1),o("span",{staticStyle:{width:"10%","text-align":"center"}},[e._v("元")])],1)],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("商品品牌：")]),o("v-uni-view",{staticClass:"commodity-info-value",staticStyle:{"border-bottom":"none",display:"flex"}},[o("v-uni-view",{staticStyle:{width:"80%",border:"2upx solid #c1c1c1","border-radius":"8upx"}},[o("v-uni-input",{staticStyle:{"padding-left":"8upx"},model:{value:e.formItem.commodityBrand,callback:function(t){e.$set(e.formItem,"commodityBrand",t)},expression:"formItem.commodityBrand"}})],1)],1)],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("商品图片：")])],1),o("v-uni-view",{staticClass:"img-class"},[o("v-uni-view",{staticStyle:{display:"flex"}},[o("v-uni-view",{staticClass:"image-list"},[e._l(e.file,(function(t,i){return o("v-uni-view",{key:i,staticClass:"image-content",on:{longpress:function(t){arguments[0]=t=e.$handleEvent(t),e.longpress.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"icon-bg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.delImg(i)}}},[o("v-uni-text",{staticClass:"iconfont iconshanchu"})],1),o("v-uni-image",{attrs:{mode:"scaleToFill",src:t.path},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImg(i)}}})],1)})),e.file.length<3?o("v-uni-view",{staticClass:"upload iconfont iconshangchuantupian",staticStyle:{"margin-left":"40upx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImg.apply(void 0,arguments)}}}):e._e()],2)],1)],1),o("v-uni-view",{staticStyle:{"margin-top":"15upx",width:"100%",float:"left",height:"50px"}},[o("v-uni-view",{staticClass:"commodity-info-title"},[e._v("详情描述：")]),o("v-uni-view",{staticClass:"commodity-info-value",staticStyle:{"border-bottom":"none"}},[o("v-uni-textarea",{staticStyle:{"padding-left":"8upx",border:"2upx solid #c1c1c1","border-radius":"8upx",height:"150upx",width:"95%","font-size":"18upx"},attrs:{placeholder:"请输入相关备注"},model:{value:e.formItem.message,callback:function(t){e.$set(e.formItem,"message",t)},expression:"formItem.message"}})],1)],1)],1),o("v-uni-view",{staticStyle:{width:"100%",float:"left"}},[o("v-uni-view",{staticClass:"button-class",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.comfirm()}}},[e._v("确 定")])],1)],1)},n=[]},b05a:function(e,t,i){"use strict";var o=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getParentAssort=r,t.checkBarCode=c,t.getCommodityInfo=l,t.comfirmCommodity=u;var a=o(i("521d")),n=o(i("c4cd")),s=i("ea86");function r(){return uni.request({url:n.default.baseUrl.dev+"/assort/parentAssort",header:{Authorization:(0,s.getToken)()},method:"GET"})}function c(e){return uni.request({url:n.default.baseUrl.dev+"/commodity/checkBarCode",header:{Authorization:(0,s.getToken)()},method:"post",data:{barCode:e}})}function l(e){return uni.request({url:"http://collect.bainligou.com:8139/api/commodity/mateCommodity?barCode="+e,method:"post"})}function u(e,t,i){return a.default.uploadFile(e,"/commodity/applyAudit",t,i)}},b330:function(e,t,i){"use strict";var o=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.wxConfig=r;var a=o(i("c4cd")),n=o(i("521d")),s=o(i("5f2c"));function r(e){n.default.request({url:a.default.baseUrl.dev+"/common/getJSAPI?requestUrl="+e}).then((function(e){var t=e.content;s.default.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["checkJsApi","scanQRCode"]})}))}},d13b:function(e,t,i){"use strict";i.r(t);var o=i("25a3"),a=i.n(o);for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);t["default"]=a.a},db90:function(e,t,i){"use strict";function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=o}}]);