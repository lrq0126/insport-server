(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"041a":function(e,n,t){"use strict";(function(e){var i=t("4ea4");t("d3b7"),t("ac1f"),t("466d"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(t("5530")),a=t("894d"),r=t("ea86"),s=t("2f62"),l={data:function(){return{loginName:"",password:""}},onBackPress:function(e){return uni.switchTab({url:"/pages/mine/index"}),!0},onShow:function(){this.handlelogout()},methods:(0,o.default)((0,o.default)({},(0,s.mapMutations)(["login","loginOperation","changeUserName","changeLoginName","logout","changeHeadimg"])),{},{handleGo:function(e){uni.navigateTo({url:e})},is_weixin:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)},handlelogout:function(){uni.removeStorageSync("info"),(0,r.removeToken)(),(0,r.removeCustomerNo)(),this.logout()},handleSubmit:function(){var e=this,n={loginName:this.loginName,password:this.password};if(this.loginName)if(this.password){uni.showLoading({title:"正在登录...",mask:!0});(0,a.login)(n).then((function(n){if(100==n[1].data.code){(0,r.setToken)(n[1].data.token);var i=n[1].data.content;e.changeUserName(i.username),e.changeLoginName(i.username),e.changeHeadimg(t("c4ee")),uni.setStorageSync("info",i),e.loginOperation(),e.login(),setTimeout((function(){uni.hideLoading(),uni.showToast({icon:"success",title:"登录成功",duration:1500})}),800),setTimeout((function(){uni.switchTab({url:"../mine/index"})}),2300)}else uni.hideLoading(),uni.showToast({title:n[1].data.message,icon:"none"})}))}else uni.showToast({icon:"none",title:"登录密码不能为空"});else uni.showToast({icon:"none",title:"登录账号不能为空"})},getPhoneNumber:function(n){if(e("log",n," at pages/login/login.vue:178"),"getPhoneNumber:fail user deny"==n.detail.errMsg)e("log","用户拒绝提供手机号码"," at pages/login/login.vue:180");else{e("log","用户同意提供手机号码"," at pages/login/login.vue:182"),e("log",JSON.stringify(n.detail.encryptedData)," at pages/login/login.vue:183"),e("log",JSON.stringify(n.detail.iv)," at pages/login/login.vue:184");var t={encryptedData:n.detail.encryptedData,iv:n.detail.iv,sessionKey:this.sessionKey};(0,a.getPhoneNumber)(t).then((function(e){e[1].data.code})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))}},handelParentsInfo:function(e){(0,a.parentsInfo)(e).then((function(e){e[1].data.code})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))},isLogin:function(){},GetUserInfo:function(n){var t=this;wx.getSetting({success:function(n){n.authSetting["scope.userInfo"]?(e("log","已授权====="," at pages/login/login.vue:310"),wx.getUserInfo({success:function(n){e("log","获取用户信息成功",n," at pages/login/login.vue:314"),t.handleRegistered(t.loginCode)},fail:function(n){e("log","获取用户信息失败",n," at pages/login/login.vue:318")}})):e("log","未授权====="," at pages/login/login.vue:322")}})},handleRegistered:function(e){var n=this;(0,a.loginRegistered)(e).then((function(e){0==e[1].data.code&&(n.sessionKey=JSON.parse(e[1].data.data).session_key,n.openid=JSON.parse(e[1].data.data).openid)})).catch((function(e){uni.showModal({content:e.errMsg,showCancel:!1})})).finally((function(){}))},showSettingToast:function(e){wx.showModal({title:"提示！",confirmText:"去设置",showCancel:!1,content:e,success:function(e){e.confirm&&wx.navigateTo({url:"../setting/setting"})}})},onGetPhoneNumber:function(n){e("log","onGetPhoneNumber",n," at pages/login/login.vue:360"),e("log",n.detail.errMsg," at pages/login/login.vue:361"),e("log",n.detail.iv," at pages/login/login.vue:362"),e("log",n.detail.encryptedData," at pages/login/login.vue:363"),uni.showModal({title:"onGetPhoneNumber",content:n.detail.errMsg})},handleWX:function(){window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxfe820ab4d2e99546&redirect_uri=http://jiyun.flycloudstorage.com/client/jiyun&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect"}})};n.default=l}).call(this,t("0de9")["log"])},"04ec":function(e,n,t){e.exports=t.p+"static/img/checkin-0.60dc9537.jpg"},"0f77":function(e,n,t){var i=t("5569");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=t("4f06").default;o("4f07fcea",i,!0,{sourceMap:!1,shadowMode:!1})},"50da":function(e,n,t){"use strict";t.r(n);var i=t("041a"),o=t.n(i);for(var a in i)"default"!==a&&function(e){t.d(n,e,(function(){return i[e]}))}(a);n["default"]=o.a},5569:function(e,n,t){var i=t("24fb"),o=t("1de5"),a=t("04ec");n=i(!1);var r=o(a);n.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/*字体颜色*/\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.login-view .header[data-v-1937d79c]{background:url('+r+") no-repeat 50%;width:100%;height:125px;text-align:center}.login-view .header .h1[data-v-1937d79c]{color:#09f;font-size:%?64?%;padding-top:%?62?%}.login-view .header uni-text[data-v-1937d79c]{color:#786450;font-size:%?36?%}.login-view .differ[data-v-1937d79c]{padding-top:0}.login-view .wrap[data-v-1937d79c]{max-width:%?1440?%;margin:0 auto;padding:%?20?% %?20?% %?150?% %?20?%}.login-view .wrap .menber-list-li[data-v-1937d79c]{color:#505050;height:%?112?%;border:1px solid #e5e5e5;line-height:%?112?%;margin-top:-1px;padding-left:%?24?%;background:#fff;position:relative}.login-view .wrap .inputt[data-v-1937d79c]{color:#505050;height:%?112?%;border:1px solid #e5e5e5;line-height:%?112?%;margin-top:-1px;background:#fff;position:relative;padding-left:0}.login-view .wrap .inputt uni-label[data-v-1937d79c]{margin-right:%?54?%;padding-left:%?30?%;width:%?120?%;display:inline-block;text-align:right;position:absolute}.login-view .wrap .inputt uni-input[data-v-1937d79c]{border:0;color:#878787;padding-left:%?160?%;width:100%;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;height:%?108?%;font-size:%?28?%;margin-left:10px}.login-view .wrap .butt[data-v-1937d79c]{border:0;background:#f3f3f3;text-align:center;margin-top:%?40?%;padding:0}.login-view .wrap .butt uni-button[data-v-1937d79c]{border:1px #dedede solid;width:100%;height:%?84?%;background:rgba(41,195,251,.96);border-radius:%?10?%;color:#fff;font-size:%?32?%}.login-view .wrap .butt .ax[data-v-1937d79c]{border:1px #dedede solid;width:100%;height:%?84?%;line-height:%?84?%;background:#fff;border-radius:%?10?%;color:rgba(41,195,251,.96);display:block;text-align:center}.login-view .wrap .one[data-v-1937d79c]{margin-top:%?32?%}.login-view .wrap .menber-list-butt[data-v-1937d79c]{position:relative;height:%?180?%;border:0;background:#f3f3f3;text-align:center;margin-top:%?40?%;padding:0;color:#505050;line-height:%?112?%}.login-view .wrap .menber-list-butt uni-view[data-v-1937d79c]{height:%?200?%;width:%?200?%;border:1px #ddd solid;border-radius:%?500?%;margin:0 auto;position:relative}.login-view .wrap .menber-list-butt uni-view img[data-v-1937d79c]{position:absolute;top:%?40?%;left:%?60?%;width:%?90?%;height:%?70?%}.login-view .wrap .menber-list-butt uni-view uni-text[data-v-1937d79c]{position:absolute;bottom:%?36?%;left:0;width:%?200?%;letter-spacing:1px}",""]),e.exports=n},"5e61":function(e,n,t){"use strict";var i;t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return a})),t.d(n,"a",(function(){return i}));var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",{staticClass:"login-view"},[t("header",[t("v-uni-view",{staticClass:"header"},[t("v-uni-view",{staticClass:"h1"},[e._v("用户登录")])],1)],1),t("v-uni-view",{staticClass:"wrap differ"},[t("v-uni-view",{staticClass:"menber-list"},[t("v-uni-view",{attrs:{id:"HandLogin"}},[t("v-uni-form",{attrs:{id:"form1"}},[t("v-uni-view",{staticClass:"menber-list-li inputt"},[t("v-uni-label",[e._v("登录账号")]),t("v-uni-input",{attrs:{type:"text",id:"username",name:"username",maxlength:"50",placeholder:"请输入登录账号"},model:{value:e.loginName,callback:function(n){e.loginName=n},expression:"loginName"}})],1),t("v-uni-view",{staticClass:"menber-list-li inputt"},[t("v-uni-label",[e._v("登录密码")]),t("v-uni-input",{attrs:{type:"password",id:"password",name:"password",maxlength:"20",placeholder:"请输入登录密码"},on:{confirm:function(n){arguments[0]=n=e.$handleEvent(n),e.handleSubmit.apply(void 0,arguments)}},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}})],1),t("v-uni-view",{staticClass:"menber-list-li butt one"},[t("v-uni-button",{staticClass:"submit",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.handleSubmit.apply(void 0,arguments)}}},[e._v("立即登录")])],1)],1)],1)],1)],1)],1)},a=[]},"6f4c":function(e,n,t){"use strict";t.r(n);var i=t("5e61"),o=t("50da");for(var a in o)"default"!==a&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t("9d12");var r,s=t("f0c5"),l=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1937d79c",null,!1,i["a"],r);n["default"]=l.exports},"894d":function(e,n,t){"use strict";var i=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.parentsInfo=s,n.login=l,n.loginRegistered=d,n.editUserInfo=u,n.loginWX=c;var o=i(t("5530")),a=i(t("c4cd")),r=t("ea86");function s(e){var n={telephone:e};return uni.request({url:a.default.baseUrl.dev+"/parent/parentApp/loginTel",method:"get",data:(0,o.default)({},n)})}function l(e){var n=e.loginName,t=e.password,i={loginName:n,password:t};return uni.request({url:a.default.baseUrl.dev+"/user/login",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:i})}function d(e){var n=e.customerName,t=e.loginName,i=e.phoneNumber,r=e.password,s={customerName:n,loginName:t,phoneNumber:i,password:r};return uni.request({url:a.default.baseUrl.dev+"/log/register",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:(0,o.default)({},s)})}function u(e){var n=e.id,t=e.customerName,i=e.password,s=e.age,l=e.gender,d=e.phoneNumber,u=e.callNumber,c=e.zipCode,g=e.englishName,p=e.email,f=e.message,h={id:n,customerName:t,password:i,age:s,gender:l,phoneNumber:d,callNumber:u,zipCode:c,englishName:g,email:p,message:f};return uni.request({url:a.default.baseUrl.dev+"/customer/update",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded",Authorization:(0,r.getToken)()+"_"+(0,r.getUserCode)()},data:(0,o.default)({},h)})}function c(e){var n={code:e};return uni.request({url:a.default.baseUrl.dev+"/weixin/getUserInfoByCode",method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},data:(0,o.default)({},n)})}},"9d12":function(e,n,t){"use strict";var i=t("0f77"),o=t.n(i);o.a}}]);